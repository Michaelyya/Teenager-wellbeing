{"ast":null,"code":"var _jsxFileName = \"/Users/xishengzhang/Desktop/Teenager-wellbeing/frontend/chat-box/src/ChatPage/ChatPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport \"./ChatPage.css\";\nimport { sendMessageToChatbot, savePreferencesToBackend } from \"../connector\";\nimport happy from \"../videos/happy.mp4\";\nimport love from \"../videos/love.mp4\";\nimport support from \"../videos/support.mp4\";\nimport dance from \"../videos/dance.mp4\";\nimport action5 from \"../videos/action5.mp4\";\nimport action11 from \"../videos/action11.mp4\";\nimport action12 from \"../videos/action12.mp4\";\nimport sad from \"../videos/sad.mp4\";\nimport { useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatPage() {\n  _s();\n  var _location$state;\n  // State\n  const [messages, setMessages] = useState([{\n    text: \"你好，我是Milo, 今天感觉怎么样？\",\n    sender: \"bot\",\n    timestamp: new Date()\n  }]);\n  const [inputText, setInputText] = useState(\"\");\n  const [currentVideo, setCurrentVideo] = useState(action5);\n  const [showNextButton, setShowNextButton] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [darkMode, setDarkMode] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const location = useLocation();\n  const [showPreferences, setShowPreferences] = useState(false);\n  const [preferences, setPreferences] = useState(((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.preferences) || JSON.parse(localStorage.getItem('chatPreferences')) || {});\n\n  // Add these states for preferences\n  const [language, setLanguage] = useState(preferences.language || '');\n  const [purpose, setPurpose] = useState(preferences.purpose || '');\n  const [selectedTraits, setSelectedTraits] = useState(preferences.personalityTraits || []);\n  const [selectedTone, setSelectedTone] = useState(preferences.tone || '');\n  const [selectedTitle, setSelectedTitle] = useState(preferences.titlePreference || '');\n  const [selectedProperNoun, setSelectedProperNoun] = useState(preferences.properNoun || '');\n\n  // Refs\n  const chatEndRef = useRef(null);\n  const videoRef = useRef(null);\n  const intervalRef = useRef(null);\n  const timeoutRef = useRef(null);\n\n  // Video management\n  const defaultVideos = [action5, action11, action12];\n  const actionVideos = {\n    happy: happy,\n    love: love,\n    support: support,\n    sad: sad,\n    dance: dance\n  };\n\n  // Add these constants for preferences options\n  const personalityTraits = ['Openness', 'Closedness', 'Agreeable', 'Non-Agreeable', 'Conscientiousness', 'Unconscientiousness', 'Extroverted', 'Introverted', 'Optimistic', 'Pessimistic', 'Helpful', 'Attentive', 'Efficient', 'Intelligent', 'Guiding', 'Sensitive', 'Empathetic', 'Curious', 'Amusing', 'Supportive', 'Inquisitive', 'Funny', 'Unpredictable', 'Snarky', 'Cute', 'Weird', 'Unusual', 'Charismatic', 'Bold', 'Creative', 'Calm', 'Collected', 'Supportive', 'Caring', 'Non-judgmental', 'Motivational', 'Predictive', 'Co-operative', 'Task Orientated', 'Competent', 'Cooperative'];\n  const tones = ['Formal', 'Casual', 'Imperative', 'Interrogative', 'Non-continuous Conversation', 'Relationship-oriented'];\n  const titles = ['Personal and Informal Titles', 'Professional and Formal Titles', 'Avoiding Use of Titles'];\n  const properNouns = ['him/his', 'her/she'];\n  const [emojisArray, setEmojisArray] = useState([]);\n\n  // Initialize default video cycle\n  useEffect(() => {\n    startDefaultCycle();\n\n    // Check for user's preferred color scheme\n    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n    setDarkMode(prefersDark);\n    if (prefersDark) {\n      document.body.classList.add('dark');\n    }\n    return () => {\n      clearInterval(intervalRef.current);\n      clearTimeout(timeoutRef.current);\n    };\n  }, []);\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, isTyping]);\n\n  // Start random video cycle\n  const startDefaultCycle = () => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n\n    // Set random idle video\n    const randomIndex = Math.floor(Math.random() * defaultVideos.length);\n    setCurrentVideo(defaultVideos[randomIndex]);\n\n    // Start cycle\n    intervalRef.current = setInterval(() => {\n      setCurrentVideo(prev => {\n        const availableVideos = defaultVideos.filter(video => video !== prev);\n        const randomIndex = Math.floor(Math.random() * availableVideos.length);\n        return availableVideos[randomIndex];\n      });\n    }, 10000);\n  };\n  const addEmojiFall = (type, quantity = 80, speed = 15) => {\n    const emojis = {\n      sad: '😢',\n      dance: '💃',\n      happy: '😊',\n      support: '🤗',\n      love: '❤️'\n    };\n    const emoji = emojis[type] || '✨';\n\n    // Clear any existing emojis\n    setEmojisArray([]);\n\n    // Create new emoji objects\n    for (let i = 0; i < quantity; i++) {\n      setTimeout(() => {\n        const newEmoji = {\n          id: Date.now() + i,\n          left: Math.floor(Math.random() * 100),\n          top: -30,\n          emoji: emoji,\n          speed: speed,\n          size: Math.floor(36 + Math.random() * 20) // Randomize size between 36px and 56px\n        };\n        setEmojisArray(prev => [...prev, newEmoji]);\n\n        // Start animation\n        const animationInterval = setInterval(() => {\n          setEmojisArray(prev => {\n            const updated = prev.map(em => {\n              if (em.id === newEmoji.id) {\n                // Move emoji downward faster\n                return {\n                  ...em,\n                  top: em.top + em.speed\n                };\n              }\n              return em;\n            });\n\n            // Remove emojis that went off screen\n            return updated.filter(em => em.top < window.innerHeight);\n          });\n        }, 20); // More frequent updates for smoother animation\n\n        // Clean up interval after shorter time\n        setTimeout(() => {\n          clearInterval(animationInterval);\n          setEmojisArray(prev => prev.filter(em => em.id !== newEmoji.id));\n        }, 3000); // Shorter lifetime\n      }, i * 20); // Much less stagger time to show more at once\n    }\n  };\n\n  // Play specific video once\n  const playSpecificVideo = videoKey => {\n    var _videoRef$current;\n    clearInterval(intervalRef.current);\n    clearTimeout(timeoutRef.current);\n    const videoToPlay = actionVideos[videoKey] || defaultVideos[0];\n    setCurrentVideo(videoToPlay);\n\n    // Return to default cycle after video duration\n    const videoDuration = ((_videoRef$current = videoRef.current) === null || _videoRef$current === void 0 ? void 0 : _videoRef$current.duration) * 1000 || 5000;\n    timeoutRef.current = setTimeout(() => {\n      startDefaultCycle();\n    }, videoDuration);\n\n    // Use the new emoji fall function\n    if (videoKey === 'sad') {\n      addEmojiFall(videoKey, 100, 5);\n    } else if (videoKey === 'happy') {\n      addEmojiFall(videoKey, 120, 6);\n    } else if (videoKey === 'dance') {\n      addEmojiFall(videoKey, 130, 6.5);\n    } else if (videoKey === 'support') {\n      addEmojiFall(videoKey, 110, 5.5);\n    } else if (videoKey === 'love') {\n      addEmojiFall(videoKey, 150, 7);\n    } else {\n      addEmojiFall(videoKey, 80, 5);\n    }\n  };\n\n  // Play emotion-based video\n  const playEmotionVideo = emotion => {\n    var _videoRef$current2;\n    clearInterval(intervalRef.current);\n    clearTimeout(timeoutRef.current);\n    switch (emotion) {\n      case 'happy':\n        setCurrentVideo(happy);\n        break;\n      case 'love':\n        setCurrentVideo(love);\n        break;\n      case 'support':\n        setCurrentVideo(support);\n        break;\n      case 'sad':\n        setCurrentVideo(sad);\n        break;\n      case 'neutral':\n        const randomIndex = Math.floor(Math.random() * defaultVideos.length);\n        setCurrentVideo(defaultVideos[randomIndex]);\n        break;\n      default:\n        break;\n    }\n\n    // Return to idle videos after playing once\n    const videoDuration = ((_videoRef$current2 = videoRef.current) === null || _videoRef$current2 === void 0 ? void 0 : _videoRef$current2.duration) * 1000 || 5000;\n    timeoutRef.current = setTimeout(() => {\n      startDefaultCycle();\n    }, videoDuration);\n\n    // Use the new emoji fall function\n    if (emotion === 'sad') {\n      addEmojiFall(emotion, 100, 5);\n    } else if (emotion === 'happy') {\n      addEmojiFall(emotion, 120, 6);\n    } else if (emotion === 'love') {\n      addEmojiFall(emotion, 150, 7);\n    } else if (emotion === 'support') {\n      addEmojiFall(emotion, 110, 5.5);\n    } else {\n      addEmojiFall(emotion, 80, 5);\n    }\n  };\n\n  // Handle next button click\n  const handleNext = async () => {\n    setShowNextButton(false);\n    setIsTyping(true);\n\n    // Play thinking animation\n    playSpecificVideo('thinking');\n    const response = await sendMessageToChatbot(\"next\");\n    setIsTyping(false);\n    if (response.response) {\n      setMessages(prev => [...prev, {\n        text: response.response,\n        sender: \"bot\",\n        timestamp: new Date()\n      }]);\n      if (response.user_emotion) {\n        playEmotionVideo(response.user_emotion.toLowerCase());\n      }\n    }\n  };\n\n  // Add these handlers for preferences\n  const handleTraitToggle = trait => {\n    if (selectedTraits.includes(trait)) {\n      setSelectedTraits(selectedTraits.filter(t => t !== trait));\n    } else {\n      setSelectedTraits([...selectedTraits, trait]);\n    }\n  };\n  const handleProperNounSelect = noun => {\n    setSelectedProperNoun(noun);\n  };\n  const savePreferences = async () => {\n    const newPreferences = {\n      language,\n      purpose,\n      personalityTraits: selectedTraits,\n      tone: selectedTone,\n      titlePreference: selectedTitle,\n      properNoun: selectedProperNoun\n    };\n\n    // Save to localStorage\n    localStorage.setItem('chatPreferences', JSON.stringify(newPreferences));\n    setPreferences(newPreferences);\n\n    // Send to backend\n    await savePreferencesToBackend(newPreferences);\n    setShowPreferences(false);\n  };\n\n  // Send message to chatbot\n  const sendMessage = async () => {\n    if (inputText.trim() === \"\") return;\n\n    // Add user message\n    const newMessages = [...messages, {\n      text: inputText,\n      sender: \"user\",\n      timestamp: new Date()\n    }];\n    setMessages(newMessages);\n    setInputText(\"\");\n\n    // Show typing indicator and waiting animation\n    setIsTyping(true);\n    playSpecificVideo('waiting');\n\n    // Get response from chatbot - Add preferences to the request\n    const response = await sendMessageToChatbot(inputText, preferences);\n    setIsTyping(false);\n    if (response.response) {\n      setMessages(prevMessages => [...prevMessages, {\n        text: response.response,\n        sender: \"bot\",\n        timestamp: new Date()\n      }]);\n\n      // Handle emotional response\n      if (response.user_emotion) {\n        playEmotionVideo(response.user_emotion.toLowerCase());\n      }\n\n      // Show next button if needed\n      if (response.move_to_next) {\n        setShowNextButton(true);\n      }\n    }\n  };\n\n  // Handle keyboard input\n  const handleKeyPress = event => {\n    if (event.key === \"Enter\") {\n      event.preventDefault();\n      sendMessage();\n    }\n  };\n\n  // Toggle dark mode\n  const toggleDarkMode = () => {\n    setDarkMode(!darkMode);\n    document.body.classList.toggle('dark');\n  };\n\n  // Format timestamp\n  const formatTimestamp = timestamp => {\n    const now = new Date();\n    const diff = Math.floor((now - timestamp) / 60000); // minutes\n\n    if (diff < 1) return \"just now\";\n    if (diff === 1) return \"1 minute ago\";\n    if (diff < 60) return `${diff} minutes ago`;\n    const hours = Math.floor(diff / 60);\n    if (hours === 1) return \"1 hour ago\";\n    if (hours < 24) return `${hours} hours ago`;\n    return timestamp.toLocaleDateString();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `chat-page ${darkMode ? 'dark-mode' : ''}`,\n    style: {\n      fontSize: '1.2rem'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-background\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 391,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"nav-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav-logo\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: [/*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M13 7h-2v6h2V7zm0 8h-2v2h2v-2z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 11\n        }, this), \"Milo Chat\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"nav-links\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"nav-link\",\n          children: \"Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"nav-link\",\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"nav-link\",\n          children: \"Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 406,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"nav-link\",\n          children: \"Help\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-link preferences-btn\",\n          onClick: () => setShowPreferences(true),\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), \"Preferences\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"theme-toggle\",\n        onClick: toggleDarkMode,\n        children: darkMode ? /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"mobile-menu-toggle\",\n        onClick: () => setMobileMenuOpen(true),\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 7\n    }, this), mobileMenuOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mobile-menu open\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-menu-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"nav-logo\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: [/*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M13 7h-2v6h2V7zm0 8h-2v2h2v-2z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 15\n          }, this), \"Milo Chat\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mobile-menu-close\",\n          onClick: () => setMobileMenuOpen(false),\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 440,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mobile-links\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"mobile-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), \"Home\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"mobile-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 15\n          }, this), \"Profile\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"mobile-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 15\n          }, this), \"Settings\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 467,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          className: \"mobile-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 474,\n            columnNumber: 15\n          }, this), \"Help\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 9\n    }, this), showPreferences && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preferences-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"preferences-popup\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preferences-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Chat Preferences\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"close-preferences\",\n            onClick: () => setShowPreferences(false),\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preferences-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"toggle-section\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"toggle\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                checked: true,\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 499,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"toggle-slider\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Verbal Style Cues\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preference-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Language\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 506,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-with-button\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Please enter\",\n                value: language,\n                onChange: e => setLanguage(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 507,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 505,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preference-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Conversation Purpose\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-with-button\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Please enter\",\n                value: purpose,\n                onChange: e => setPurpose(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 520,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preference-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Titles\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-buttons\",\n              children: titles.map(title => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `option-button ${selectedTitle === title ? 'selected' : ''}`,\n                onClick: () => setSelectedTitle(title),\n                children: title\n              }, title, false, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preference-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Proper Nouns\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 545,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-buttons\",\n              children: properNouns.map(noun => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `option-button ${selectedProperNoun === noun ? 'selected' : ''}`,\n                onClick: () => handleProperNounSelect(noun),\n                children: noun\n              }, noun, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 546,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preference-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Personality Traits\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 560,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"trait-options\",\n              children: personalityTraits.map(trait => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `trait-button ${selectedTraits.includes(trait) ? 'selected' : ''}`,\n                onClick: () => handleTraitToggle(trait),\n                children: trait\n              }, trait, false, {\n                fileName: _jsxFileName,\n                lineNumber: 563,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 561,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"preference-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Tone\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 575,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-buttons\",\n              children: tones.map(tone => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `option-button ${selectedTone === tone ? 'selected' : ''}`,\n                onClick: () => setSelectedTone(tone),\n                children: tone\n              }, tone, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 576,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preferences-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"save-preferences\",\n            onClick: savePreferences,\n            children: \"Save Preferences\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"character-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"video\", {\n          ref: videoRef,\n          autoPlay: true,\n          loop: true,\n          muted: true,\n          className: \"character-video\",\n          children: /*#__PURE__*/_jsxDEV(\"source\", {\n            src: currentVideo,\n            type: \"video/mp4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 13\n          }, this)\n        }, currentVideo, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"character-controls\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"character-control-btn\",\n            onClick: () => playSpecificVideo('welcome'),\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 616,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"character-name\",\n          children: \"Milo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-box\",\n        style: {\n          maxWidth: '90%',\n          // Increase from default\n          height: '75vh',\n          // Make chat area taller\n          margin: '0 auto' // Center it\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 15\n            }, this), \"Chat with Milo\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chat-action-btn\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M15 4v7H5.17l-.59.59-.58.58V4h11m1-2H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm5 4h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 640,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 639,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chat-action-btn\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 645,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 644,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"messages-date-divider\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"messages-date-text\",\n              children: \"Today\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 654,\n            columnNumber: 13\n          }, this), messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `chat-bubble ${msg.sender} ${index === messages.length - 1 ? 'with-actions' : ''}`,\n            children: [msg.text, index === messages.length - 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"message-action-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M16 22c1.1 0 2-.9 2-2l-.01-12c0-1.1-.89-2-1.99-2h-8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8zM8 6h8v12H8V6z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 667,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M12.5 11.25H14v1.5h-1.5zM15 11.25h1.5v1.5H15zM10 11.25h1.5v1.5H10zM7.5 11.25H9v1.5H7.5zM16 8V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v4h8z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 668,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 666,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 665,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"message-action-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 673,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 672,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 671,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 664,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 660,\n            columnNumber: 15\n          }, this)), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-bubble bot typing\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-dot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-dot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 685,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-dot\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 686,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: chatEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 652,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-input-container\",\n          style: {\n            fontSize: '1.3rem',\n            maxWidth: '90%',\n            margin: '1rem auto'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-input-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"chat-input-action-btn\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 704,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Type your message...\",\n              value: inputText,\n              onChange: e => setInputText(e.target.value),\n              onKeyPress: handleKeyPress\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 709,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"chat-input-send\",\n              onClick: sendMessage,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M2 21L23 12L2 3V10L17 12L2 14V21Z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 719,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 718,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 717,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 11\n        }, this), showNextButton && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"next-button\",\n          onClick: handleNext,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 728,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 730,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 729,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 727,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute-button\",\n        onClick: () => playSpecificVideo('random'),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 741,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 740,\n          columnNumber: 11\n        }, this), \"Random\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute-button\",\n        onClick: () => playSpecificVideo('sad'),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 747,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 11\n        }, this), \"Sad\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute-button\",\n        onClick: () => playSpecificVideo('dance'),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 753,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 752,\n          columnNumber: 11\n        }, this), \"Dance\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute-button\",\n        onClick: () => playSpecificVideo('happy'),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 759,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 758,\n          columnNumber: 11\n        }, this), \"Happy\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 757,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute-button\",\n        onClick: () => playSpecificVideo('support'),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 765,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 764,\n          columnNumber: 11\n        }, this), \"Support\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"absolute-button\",\n        onClick: () => playSpecificVideo('love'),\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          viewBox: \"0 0 24 24\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 771,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 770,\n          columnNumber: 11\n        }, this), \"Love\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 7\n    }, this), emojisArray.map(emoji => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        left: `${emoji.left}%`,\n        top: `${emoji.top}px`,\n        fontSize: `${emoji.size}px`,\n        zIndex: 9999,\n        opacity: Math.max(0, 1 - emoji.top / window.innerHeight)\n      },\n      children: emoji.emoji\n    }, emoji.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 778,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 388,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatPage, \"aieH6qJv24iTuQ86EC3aqGO54s4=\", false, function () {\n  return [useLocation];\n});\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","sendMessageToChatbot","savePreferencesToBackend","happy","love","support","dance","action5","action11","action12","sad","useLocation","jsxDEV","_jsxDEV","ChatPage","_s","_location$state","messages","setMessages","text","sender","timestamp","Date","inputText","setInputText","currentVideo","setCurrentVideo","showNextButton","setShowNextButton","isTyping","setIsTyping","darkMode","setDarkMode","mobileMenuOpen","setMobileMenuOpen","location","showPreferences","setShowPreferences","preferences","setPreferences","state","JSON","parse","localStorage","getItem","language","setLanguage","purpose","setPurpose","selectedTraits","setSelectedTraits","personalityTraits","selectedTone","setSelectedTone","tone","selectedTitle","setSelectedTitle","titlePreference","selectedProperNoun","setSelectedProperNoun","properNoun","chatEndRef","videoRef","intervalRef","timeoutRef","defaultVideos","actionVideos","tones","titles","properNouns","emojisArray","setEmojisArray","startDefaultCycle","prefersDark","window","matchMedia","matches","document","body","classList","add","clearInterval","current","clearTimeout","_chatEndRef$current","scrollIntoView","behavior","randomIndex","Math","floor","random","length","setInterval","prev","availableVideos","filter","video","addEmojiFall","type","quantity","speed","emojis","emoji","i","setTimeout","newEmoji","id","now","left","top","size","animationInterval","updated","map","em","innerHeight","playSpecificVideo","videoKey","_videoRef$current","videoToPlay","videoDuration","duration","playEmotionVideo","emotion","_videoRef$current2","handleNext","response","user_emotion","toLowerCase","handleTraitToggle","trait","includes","t","handleProperNounSelect","noun","savePreferences","newPreferences","setItem","stringify","sendMessage","trim","newMessages","prevMessages","move_to_next","handleKeyPress","event","key","preventDefault","toggleDarkMode","toggle","formatTimestamp","diff","hours","toLocaleDateString","className","style","fontSize","children","fileName","_jsxFileName","lineNumber","columnNumber","xmlns","viewBox","d","href","onClick","checked","readOnly","placeholder","value","onChange","e","target","title","ref","autoPlay","loop","muted","src","maxWidth","height","margin","msg","index","onKeyPress","position","zIndex","opacity","max","_c","$RefreshReg$"],"sources":["/Users/xishengzhang/Desktop/Teenager-wellbeing/frontend/chat-box/src/ChatPage/ChatPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./ChatPage.css\";\nimport { sendMessageToChatbot, savePreferencesToBackend } from \"../connector\";\nimport happy from \"../videos/happy.mp4\";\nimport love from \"../videos/love.mp4\";\nimport support from \"../videos/support.mp4\";\nimport dance from \"../videos/dance.mp4\";\nimport action5 from \"../videos/action5.mp4\";\nimport action11 from \"../videos/action11.mp4\";\nimport action12 from \"../videos/action12.mp4\";\nimport sad from \"../videos/sad.mp4\";\nimport { useLocation } from \"react-router-dom\";\n\nfunction ChatPage() {\n  // State\n  const [messages, setMessages] = useState([\n    { text: \"你好，我是Milo, 今天感觉怎么样？\", sender: \"bot\", timestamp: new Date() },\n  ]);\n  const [inputText, setInputText] = useState(\"\");\n  const [currentVideo, setCurrentVideo] = useState(action5);\n  const [showNextButton, setShowNextButton] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [darkMode, setDarkMode] = useState(false);\n  const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n  const location = useLocation();\n  const [showPreferences, setShowPreferences] = useState(false);\n  const [preferences, setPreferences] = useState(\n    location.state?.preferences || JSON.parse(localStorage.getItem('chatPreferences')) || {}\n  );\n  \n  // Add these states for preferences\n  const [language, setLanguage] = useState(preferences.language || '');\n  const [purpose, setPurpose] = useState(preferences.purpose || '');\n  const [selectedTraits, setSelectedTraits] = useState(preferences.personalityTraits || []);\n  const [selectedTone, setSelectedTone] = useState(preferences.tone || '');\n  const [selectedTitle, setSelectedTitle] = useState(preferences.titlePreference || '');\n  const [selectedProperNoun, setSelectedProperNoun] = useState(preferences.properNoun || '');\n  \n  // Refs\n  const chatEndRef = useRef(null);\n  const videoRef = useRef(null);\n  const intervalRef = useRef(null);\n  const timeoutRef = useRef(null);\n  \n  // Video management\n  const defaultVideos = [action5,action11,action12];\n  const actionVideos = {\n    happy: happy,\n    love: love,\n    support: support,\n    sad: sad,\n    dance: dance,\n  };\n\n  // Add these constants for preferences options\n  const personalityTraits = [\n    'Openness', 'Closedness', 'Agreeable', 'Non-Agreeable', 'Conscientiousness', 'Unconscientiousness',\n    'Extroverted', 'Introverted', 'Optimistic', 'Pessimistic',\n    'Helpful', 'Attentive', 'Efficient', 'Intelligent', 'Guiding',\n    'Sensitive', 'Empathetic', 'Curious', 'Amusing', 'Supportive', 'Inquisitive',\n    'Funny', 'Unpredictable', 'Snarky', 'Cute', 'Weird', 'Unusual', 'Charismatic', 'Bold', 'Creative',\n    'Calm', 'Collected', 'Supportive', 'Caring', 'Non-judgmental', 'Motivational',\n    'Predictive', 'Co-operative', 'Task Orientated', 'Competent', 'Cooperative'\n  ];\n\n  const tones = [\n    'Formal', 'Casual', 'Imperative', 'Interrogative', 'Non-continuous Conversation', 'Relationship-oriented'\n  ];\n\n  const titles = [\n    'Personal and Informal Titles', 'Professional and Formal Titles', 'Avoiding Use of Titles'\n  ];\n\n  const properNouns = ['him/his', 'her/she'];\n  \n  const [emojisArray, setEmojisArray] = useState([]);\n  \n  // Initialize default video cycle\n  useEffect(() => {\n    startDefaultCycle();\n    \n    // Check for user's preferred color scheme\n    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;\n    setDarkMode(prefersDark);\n    \n    if (prefersDark) {\n      document.body.classList.add('dark');\n    }\n    \n    return () => {\n      clearInterval(intervalRef.current);\n      clearTimeout(timeoutRef.current);\n    };\n  }, []);\n  \n  // Scroll to bottom when messages change\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, isTyping]);\n\n  // Start random video cycle\n  const startDefaultCycle = () => {\n    if (intervalRef.current) {\n      clearInterval(intervalRef.current);\n    }\n    \n    // Set random idle video\n    const randomIndex = Math.floor(Math.random() * defaultVideos.length);\n    setCurrentVideo(defaultVideos[randomIndex]);\n    \n    // Start cycle\n    intervalRef.current = setInterval(() => {\n      setCurrentVideo(prev => {\n        const availableVideos = defaultVideos.filter(video => video !== prev);\n        const randomIndex = Math.floor(Math.random() * availableVideos.length);\n        return availableVideos[randomIndex];\n      });\n    }, 10000);\n  };\n\n  const addEmojiFall = (type, quantity = 80, speed = 15) => {\n    const emojis = {\n      sad: '😢',\n      dance: '💃',\n      happy: '😊',\n      support: '🤗',\n      love: '❤️'\n    };\n    \n    const emoji = emojis[type] || '✨';\n    \n    // Clear any existing emojis\n    setEmojisArray([]);\n    \n    // Create new emoji objects\n    for (let i = 0; i < quantity; i++) {\n      setTimeout(() => {\n        const newEmoji = {\n          id: Date.now() + i,\n          left: Math.floor(Math.random() * 100),\n          top: -30,\n          emoji: emoji,\n          speed: speed,\n          size: Math.floor(36 + Math.random() * 20) // Randomize size between 36px and 56px\n        };\n        \n        setEmojisArray(prev => [...prev, newEmoji]);\n        \n        // Start animation\n        const animationInterval = setInterval(() => {\n          setEmojisArray(prev => {\n            const updated = prev.map(em => {\n              if (em.id === newEmoji.id) {\n                // Move emoji downward faster\n                return { ...em, top: em.top + em.speed };\n              }\n              return em;\n            });\n            \n            // Remove emojis that went off screen\n            return updated.filter(em => em.top < window.innerHeight);\n          });\n        }, 20); // More frequent updates for smoother animation\n        \n        // Clean up interval after shorter time\n        setTimeout(() => {\n          clearInterval(animationInterval);\n          setEmojisArray(prev => prev.filter(em => em.id !== newEmoji.id));\n        }, 3000); // Shorter lifetime\n      }, i * 20); // Much less stagger time to show more at once\n    }\n  };\n\n  // Play specific video once\n  const playSpecificVideo = (videoKey) => {\n    clearInterval(intervalRef.current);\n    clearTimeout(timeoutRef.current);\n    \n    const videoToPlay = actionVideos[videoKey] || defaultVideos[0];\n    setCurrentVideo(videoToPlay);\n    \n    // Return to default cycle after video duration\n    const videoDuration = videoRef.current?.duration * 1000 || 5000;\n    timeoutRef.current = setTimeout(() => {\n      startDefaultCycle();\n    }, videoDuration);\n    \n    // Use the new emoji fall function\n    if (videoKey === 'sad') {\n      addEmojiFall(videoKey, 100, 5);\n    } else if (videoKey === 'happy') {\n      addEmojiFall(videoKey, 120, 6);\n    } else if (videoKey === 'dance') {\n      addEmojiFall(videoKey, 130, 6.5);\n    } else if (videoKey === 'support') {\n      addEmojiFall(videoKey, 110, 5.5);\n    } else if (videoKey === 'love') {\n      addEmojiFall(videoKey, 150, 7);\n    } else {\n      addEmojiFall(videoKey, 80, 5);\n    }\n  };\n\n  // Play emotion-based video\n  const playEmotionVideo = (emotion) => {\n    clearInterval(intervalRef.current);\n    clearTimeout(timeoutRef.current);\n\n    switch(emotion) {\n      case 'happy':\n        setCurrentVideo(happy);\n        break;\n      case 'love':\n        setCurrentVideo(love);\n        break;\n      case 'support':\n        setCurrentVideo(support);\n        break;\n      case 'sad':\n        setCurrentVideo(sad);\n        break;\n      case 'neutral':\n        const randomIndex = Math.floor(Math.random() * defaultVideos.length);\n        setCurrentVideo(defaultVideos[randomIndex]);\n        break;\n      default:\n        break;\n    }\n\n    // Return to idle videos after playing once\n    const videoDuration = videoRef.current?.duration * 1000 || 5000;\n    timeoutRef.current = setTimeout(() => {\n      startDefaultCycle();\n    }, videoDuration);\n    \n    // Use the new emoji fall function\n    if (emotion === 'sad') {\n      addEmojiFall(emotion, 100, 5);\n    } else if (emotion === 'happy') {\n      addEmojiFall(emotion, 120, 6);\n    } else if (emotion === 'love') {\n      addEmojiFall(emotion, 150, 7);\n    } else if (emotion === 'support') {\n      addEmojiFall(emotion, 110, 5.5);\n    } else {\n      addEmojiFall(emotion, 80, 5);\n    }\n  };\n\n  // Handle next button click\n  const handleNext = async () => {\n    setShowNextButton(false);\n    setIsTyping(true);\n    \n    // Play thinking animation\n    playSpecificVideo('thinking');\n    \n    const response = await sendMessageToChatbot(\"next\");\n    setIsTyping(false);\n    \n    if (response.response) {\n      setMessages(prev => [\n        ...prev, \n        { \n          text: response.response, \n          sender: \"bot\", \n          timestamp: new Date() \n        }\n      ]);\n      \n      if (response.user_emotion) {\n        playEmotionVideo(response.user_emotion.toLowerCase());\n      }\n    }\n  };\n\n  // Add these handlers for preferences\n  const handleTraitToggle = (trait) => {\n    if (selectedTraits.includes(trait)) {\n      setSelectedTraits(selectedTraits.filter(t => t !== trait));\n    } else {\n      setSelectedTraits([...selectedTraits, trait]);\n    }\n  };\n\n  const handleProperNounSelect = (noun) => {\n    setSelectedProperNoun(noun);\n  };\n  \n  const savePreferences = async () => {\n    const newPreferences = {\n      language,\n      purpose,\n      personalityTraits: selectedTraits,\n      tone: selectedTone,\n      titlePreference: selectedTitle,\n      properNoun: selectedProperNoun\n    };\n    \n    // Save to localStorage\n    localStorage.setItem('chatPreferences', JSON.stringify(newPreferences));\n    setPreferences(newPreferences);\n    \n    // Send to backend\n    await savePreferencesToBackend(newPreferences);\n    \n    setShowPreferences(false);\n  };\n\n  // Send message to chatbot\n  const sendMessage = async () => {\n    if (inputText.trim() === \"\") return;\n\n    // Add user message\n    const newMessages = [\n      ...messages, \n      { \n        text: inputText, \n        sender: \"user\", \n        timestamp: new Date() \n      }\n    ];\n    \n    setMessages(newMessages);\n    setInputText(\"\");\n    \n    // Show typing indicator and waiting animation\n    setIsTyping(true);\n    playSpecificVideo('waiting');\n\n    // Get response from chatbot - Add preferences to the request\n    const response = await sendMessageToChatbot(inputText, preferences);\n    setIsTyping(false);\n    \n    if (response.response) {\n      setMessages((prevMessages) => [\n        ...prevMessages,\n        { \n          text: response.response, \n          sender: \"bot\", \n          timestamp: new Date() \n        },\n      ]);\n      \n      // Handle emotional response\n      if (response.user_emotion) {\n        playEmotionVideo(response.user_emotion.toLowerCase());\n      }\n      \n      // Show next button if needed\n      if (response.move_to_next) {\n        setShowNextButton(true);\n      }\n    }\n  };\n\n  // Handle keyboard input\n  const handleKeyPress = (event) => {\n    if (event.key === \"Enter\") {\n      event.preventDefault(); \n      sendMessage();\n    }\n  };\n  \n  // Toggle dark mode\n  const toggleDarkMode = () => {\n    setDarkMode(!darkMode);\n    document.body.classList.toggle('dark');\n  };\n  \n  // Format timestamp\n  const formatTimestamp = (timestamp) => {\n    const now = new Date();\n    const diff = Math.floor((now - timestamp) / 60000); // minutes\n    \n    if (diff < 1) return \"just now\";\n    if (diff === 1) return \"1 minute ago\";\n    if (diff < 60) return `${diff} minutes ago`;\n    \n    const hours = Math.floor(diff / 60);\n    if (hours === 1) return \"1 hour ago\";\n    if (hours < 24) return `${hours} hours ago`;\n    \n    return timestamp.toLocaleDateString();\n  };\n\n  return (\n    <div className={`chat-page ${darkMode ? 'dark-mode' : ''}`}\n      style={{ fontSize: '1.2rem' }}\n    >\n      <div className=\"page-background\"></div>\n      \n      {/* Navigation */}\n      <div className=\"nav-bar\">\n        <div className=\"nav-logo\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z\"/>\n            <path d=\"M13 7h-2v6h2V7zm0 8h-2v2h2v-2z\"/>\n          </svg>\n          Milo Chat\n        </div>\n        \n        <div className=\"nav-links\">\n          <a href=\"#\" className=\"nav-link\">Home</a>\n          <a href=\"#\" className=\"nav-link\">Profile</a>\n          <a href=\"#\" className=\"nav-link\">Settings</a>\n          <a href=\"#\" className=\"nav-link\">Help</a>\n          \n          {/* Add this button to open preferences */}\n          <button className=\"nav-link preferences-btn\" onClick={() => setShowPreferences(true)}>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\" />\n            </svg>\n            Preferences\n          </button>\n        </div>\n        \n        <button className=\"theme-toggle\" onClick={toggleDarkMode}>\n          {darkMode ? (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path d=\"M12 9c1.65 0 3 1.35 3 3s-1.35 3-3 3-3-1.35-3-3 1.35-3 3-3m0-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z\" />\n            </svg>\n          ) : (\n            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n              <path d=\"M9.37 5.51c-.18.64-.27 1.31-.27 1.99 0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49zM12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z\" />\n            </svg>\n          )}\n        </button>\n        \n        <button className=\"mobile-menu-toggle\" onClick={() => setMobileMenuOpen(true)}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" />\n          </svg>\n        </button>\n      </div>\n\n      {/* Mobile menu */}\n      {mobileMenuOpen && (\n        <div className=\"mobile-menu open\">\n          <div className=\"mobile-menu-header\">\n            <div className=\"nav-logo\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z\"/>\n                <path d=\"M13 7h-2v6h2V7zm0 8h-2v2h2v-2z\"/>\n              </svg>\n              Milo Chat\n            </div>\n            <button className=\"mobile-menu-close\" onClick={() => setMobileMenuOpen(false)}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" />\n              </svg>\n            </button>\n          </div>\n          <div className=\"mobile-links\">\n            <a href=\"#\" className=\"mobile-link\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z\" />\n              </svg>\n              Home\n            </a>\n            <a href=\"#\" className=\"mobile-link\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\" />\n              </svg>\n              Profile\n            </a>\n            <a href=\"#\" className=\"mobile-link\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\" />\n              </svg>\n              Settings\n            </a>\n            <a href=\"#\" className=\"mobile-link\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\" />\n              </svg>\n              Help\n            </a>\n          </div>\n        </div>\n      )}\n\n      {/* Preferences Popup */}\n      {showPreferences && (\n        <div className=\"preferences-overlay\">\n          <div className=\"preferences-popup\">\n            <div className=\"preferences-header\">\n              <h2>Chat Preferences</h2>\n              <button className=\"close-preferences\" onClick={() => setShowPreferences(false)}>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                  <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z\" />\n                </svg>\n              </button>\n            </div>\n            \n            <div className=\"preferences-content\">\n              <div className=\"toggle-section\">\n                <label className=\"toggle\">\n                  <input type=\"checkbox\" checked={true} readOnly />\n                  <span className=\"toggle-slider\"></span>\n                </label>\n                <span>Verbal Style Cues</span>\n              </div>\n              \n              <div className=\"preference-group\">\n                <h3>Language</h3>\n                <div className=\"input-with-button\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Please enter\"\n                    value={language}\n                    onChange={(e) => setLanguage(e.target.value)}\n                  />\n                </div>\n              </div>\n\n              <div className=\"preference-group\">\n                <h3>Conversation Purpose</h3>\n                <div className=\"input-with-button\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"Please enter\"\n                    value={purpose}\n                    onChange={(e) => setPurpose(e.target.value)}\n                  />\n                </div>\n              </div>\n\n              <div className=\"preference-group\">\n                <h3>Titles</h3>\n                <div className=\"option-buttons\">\n                  {titles.map((title) => (\n                    <button\n                      key={title}\n                      className={`option-button ${selectedTitle === title ? 'selected' : ''}`}\n                      onClick={() => setSelectedTitle(title)}\n                    >\n                      {title}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"preference-group\">\n                <h3>Proper Nouns</h3>\n                <div className=\"option-buttons\">\n                  {properNouns.map((noun) => (\n                    <button\n                      key={noun}\n                      className={`option-button ${selectedProperNoun === noun ? 'selected' : ''}`}\n                      onClick={() => handleProperNounSelect(noun)}\n                    >\n                      {noun}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"preference-group\">\n                <h3>Personality Traits</h3>\n                <div className=\"trait-options\">\n                  {personalityTraits.map((trait) => (\n                    <button \n                      key={trait} \n                      className={`trait-button ${selectedTraits.includes(trait) ? 'selected' : ''}`}\n                      onClick={() => handleTraitToggle(trait)}\n                    >\n                      {trait}\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"preference-group\">\n                <h3>Tone</h3>\n                <div className=\"option-buttons\">\n                  {tones.map((tone) => (\n                    <button\n                      key={tone}\n                      className={`option-button ${selectedTone === tone ? 'selected' : ''}`}\n                      onClick={() => setSelectedTone(tone)}\n                    >\n                      {tone}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"preferences-actions\">\n              <button className=\"save-preferences\" onClick={savePreferences}>\n                Save Preferences\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"chat-content\">\n        {/* Character video panel */}\n        <div className=\"character-panel\">\n          <video \n            ref={videoRef}\n            key={currentVideo}\n            autoPlay \n            loop \n            muted \n            className=\"character-video\"\n          >\n            <source src={currentVideo} type=\"video/mp4\" />\n          </video>\n          \n          <div className=\"character-controls\">\n            <button className=\"character-control-btn\" onClick={() => playSpecificVideo('welcome')}>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z\" />\n              </svg>\n            </button>\n          </div>\n          \n          <div className=\"character-name\">Milo</div>\n        </div>\n        \n        {/* Chat interface */}\n        <div className=\"chat-box\" style={{ \n          maxWidth: '90%',  // Increase from default\n          height: '75vh',   // Make chat area taller\n          margin: '0 auto'  // Center it\n        }}>\n          <div className=\"chat-header\">\n            <h2>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z\" />\n              </svg>\n              Chat with Milo\n            </h2>\n            \n            <div className=\"chat-actions\">\n              <button className=\"chat-action-btn\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                  <path d=\"M15 4v7H5.17l-.59.59-.58.58V4h11m1-2H3c-.55 0-1 .45-1 1v14l4-4h10c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm5 4h-2v9H6v2c0 .55.45 1 1 1h11l4 4V7c0-.55-.45-1-1-1z\" />\n                </svg>\n              </button>\n              <button className=\"chat-action-btn\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                  <path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3z\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n          \n          <div className=\"chat-messages\">\n            {/* Date divider (optional) */}\n            <div className=\"messages-date-divider\">\n              <span className=\"messages-date-text\">Today</span>\n            </div>\n            \n            {/* Conversation messages */}\n            {messages.map((msg, index) => (\n              <div key={index} className={`chat-bubble ${msg.sender} ${index === messages.length - 1 ? 'with-actions' : ''}`}>\n                {msg.text}\n                \n                {index === messages.length - 1 && (\n                  <div className=\"message-actions\">\n                    <button className=\"message-action-btn\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                        <path d=\"M16 22c1.1 0 2-.9 2-2l-.01-12c0-1.1-.89-2-1.99-2h-8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h8zM8 6h8v12H8V6z\" />\n                        <path d=\"M12.5 11.25H14v1.5h-1.5zM15 11.25h1.5v1.5H15zM10 11.25h1.5v1.5H10zM7.5 11.25H9v1.5H7.5zM16 8V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v4h8z\" />\n                      </svg>\n                    </button>\n                    <button className=\"message-action-btn\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                        <path d=\"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z\" />\n                      </svg>\n                    </button>\n                  </div>\n                )}\n              </div>\n            ))}\n            \n            {/* Typing indicator */}\n            {isTyping && (\n              <div className=\"chat-bubble bot typing\">\n                <div className=\"typing-dot\"></div>\n                <div className=\"typing-dot\"></div>\n                <div className=\"typing-dot\"></div>\n              </div>\n            )}\n            \n            {/* Invisible element to scroll to */}\n            <div ref={chatEndRef} />\n          </div>\n\n          {/* Chat input */}\n          <div className=\"chat-input-container\" style={{ \n            fontSize: '1.3rem',\n            maxWidth: '90%',\n            margin: '1rem auto'\n          }}>\n            <div className=\"chat-input\">\n              <div className=\"chat-input-actions\">\n                <button className=\"chat-input-action-btn\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                    <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\" />\n                  </svg>\n                </button>\n              </div>\n              \n              <input\n                type=\"text\"\n                placeholder=\"Type your message...\"\n                value={inputText}\n                onChange={(e) => setInputText(e.target.value)}\n                onKeyPress={handleKeyPress}\n              />\n              \n              <button className=\"chat-input-send\" onClick={sendMessage}>\n                <svg viewBox=\"0 0 24 24\">\n                  <path d=\"M2 21L23 12L2 3V10L17 12L2 14V21Z\"></path>\n                </svg>\n              </button>\n            </div>\n          </div>\n          \n          {/* Next button */}\n          {showNextButton && (\n            <button className=\"next-button\" onClick={handleNext}>\n              <span>Continue</span>\n              <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z\" />\n              </svg>\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Action buttons */}\n      <div className=\"button-container\">\n        <button className=\"absolute-button\" onClick={() => playSpecificVideo('random')}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z\" />\n          </svg>\n          Random\n        </button>\n        <button className=\"absolute-button\" onClick={() => playSpecificVideo('sad')}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\" />  \n          </svg>\n          Sad\n        </button>\n        <button className=\"absolute-button\" onClick={() => playSpecificVideo('dance')}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z\" />\n          </svg>\n          Dance\n        </button>\n        <button className=\"absolute-button\" onClick={() => playSpecificVideo('happy')}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z\" />\n          </svg>\n          Happy\n        </button>\n        <button className=\"absolute-button\" onClick={() => playSpecificVideo('support')}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z\" />\n          </svg>\n          Support\n        </button>\n        <button className=\"absolute-button\" onClick={() => playSpecificVideo('love')}>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n            <path d=\"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\" />\n          </svg>\n          Love\n        </button>\n      </div>\n\n      {emojisArray.map(emoji => (\n        <div \n          key={emoji.id}\n          style={{\n            position: 'fixed',\n            left: `${emoji.left}%`,\n            top: `${emoji.top}px`,\n            fontSize: `${emoji.size}px`,\n            zIndex: 9999,\n            opacity: Math.max(0, 1 - (emoji.top / window.innerHeight))\n          }}\n        >\n          {emoji.emoji}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default ChatPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}